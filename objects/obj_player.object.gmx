<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_still</spriteName>
  <solid>-1</solid>
  <visible>-1</visible>
  <depth>-500</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>speed = 0
image_speed = 0

// Bring in same state variables as enemy
// Right now we're only using GHOST and MOVING
MOVING = 0
IS_HURT = 1
TIRED = 2
PUNCHING_PLAYER = 3
WAKE_UP = 4
ELIMINATED = 5
ENTERING = 6
GHOST = 7
KNOCKED_BACK = 8
STILL = 9

// Set initial state to MOVING
state = MOVING

// This just makes sure random numbers are different every game
randomize();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (obj_heart_cont.hasHearts) {
    state = MOVING
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Alarm for moving player back after being hit
// moveBackAmount will decrease as this is called to slide the player back


moveDirection = 0;
// collisionDirection is rounded, so find closest arrow direction to move in
if (collisionDirection &gt; 45 &amp;&amp; collisionDirection &lt; 135) {
    moveDirection = 90;
} else if (collisionDirection &gt;= 135 &amp;&amp; collisionDirection &lt; 225) {
    moveDirection = 180;
} else if (collisionDirection &gt;= 225 &amp;&amp; collisionDirection &lt; 305) {
    moveDirection = 270;
} else {
    moveDirection = 0;
}

if (moveBackAmount &gt; 0) {
    
    // Turn off normal player speed while getting knocked back
    speed = 0;
    
    // Move player depending on which way they are facing
    if (moveDirection == 0) {
        x = x - 7
    }
    if (moveDirection == 90) {
        y = y + 7
    }
    if (moveDirection == 180) {
        x = x + 7
    }
    if (moveDirection == 270) {
        y = y - 7
    }
    
    if (obj_heart_cont.hasHearts) {
        // Set character sprite to being hurt
        state = KNOCKED_BACK
    } else {
        state = TIRED
    }
    
    
    // Decrease our move back amount so we know when to stop (when it gets to 0)
    moveBackAmount = moveBackAmount - 1
    // Call this alarm again
    alarm[0] = 1
} else {
    // When moveBackAmount is at 0, set speed to normal if we still have hearts
     if (obj_heart_cont.hasHearts) {
        state = STILL
    }
    
    // Set state back to moving after an amount of time
    alarm[1] = 50
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Override sprite indices set previously if we're being knocked back
if (state == KNOCKED_BACK) {
    sprite_index = spr_punched;
    exit;
}

if (state == STILL) {
    sprite_index = spr_still
    speed = 0
    exit
}


if (keyboard_check(vk_down)){
    direction = 270
    sprite_index = spr_down
    speed = 4
    image_speed = .2
    
    if (state == TIRED) {
        sprite_index = spr_tired
        speed = 2
    }
    
}
if (keyboard_check(vk_up)){
    direction = 90
    sprite_index = spr_up
    speed = 4
    image_speed = .2
    
    if (state == TIRED) {
        sprite_index = spr_tired
        speed = 2
    }
}
if (keyboard_check(vk_left)){
    direction = 180
    sprite_index = spr_left
    speed = 4
    image_speed = .2
    
    if (state == TIRED) {
        sprite_index = spr_tired
        speed = 2
    }
}
if (keyboard_check(vk_right)){
    direction = 0
    sprite_index = spr_right
    speed = 4
    image_speed = .2
    
    if (state == TIRED) {
        sprite_index = spr_tired
        speed = 2
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_wall_player">
      <action>
        <libid>1</libid>
        <id>410</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_aligned</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>16</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>16</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>101</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_move</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>000010000</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (state != MOVING &amp;&amp; state != PUNCHING_PLAYER) {
    // collisionDirection is rounded, so find closest arrow direction to move in
    // need to go in opposite direction than coming from
    if (collisionDirection &gt; 45 &amp;&amp; collisionDirection &lt; 135) {
        // coming from direction = 90;
        direction = 270
    } else if (collisionDirection &gt;= 135 &amp;&amp; collisionDirection &lt; 225) {
        // coming from direction = 180;
        direction = 0
    } else if (collisionDirection &gt;= 225 &amp;&amp; collisionDirection &lt; 305) {
        // coming from direction = 270;
        direction = 90
    } else {
        // coming from direction = 0;
        direction = 180
    }
    instance_change(obj_player_eliminated, true);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
// Get knocked back based on which direction we're facing
// moveBackAmount is how many times we will call alarm[0] to push the player back
moveBackAmount = 10

alarm[0] = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
